<IfModule mod_ssl.c>

    <VirtualHost *:80>
        ServerName pos.twileloop.com
        Redirect permanent / https://pos.twileloop.com/
    </VirtualHost>

    <VirtualHost *:80>
        ServerName twileloop.com
        Redirect permanent / https://twileloop.com/
    </VirtualHost>  
    
    
     
     <VirtualHost *:443>
        ServerName twileloop.com
        DocumentRoot /home/root/twileloop
        
        <Directory /home/root/twileloop>
            Options Indexes FollowSymLinks
            AllowOverride All
            Require all granted
        </Directory>
        
        ProxyPreserveHost On
        ProxyPass / http://localhost:5001/
        ProxyPassReverse / http://localhost:5001/ 
        
        SSLCertificateFile /etc/letsencrypt/live/twileloop.com/fullchain.pem
        SSLCertificateKeyFile /etc/letsencrypt/live/twileloop.com/privkey.pem
        Include /etc/letsencrypt/options-ssl-apache.conf
     </VirtualHost>
     
     
     <VirtualHost *:443>
        ServerName pos.twileloop.com
        DocumentRoot /home/root/pos.twileloop
        
        <Directory /home/root/pos.twileloop>
            Options Indexes FollowSymLinks
            AllowOverride All
            Require all granted
        </Directory>
        
        ProxyPreserveHost On
        ProxyPass / http://localhost:5002/
        ProxyPassReverse / http://localhost:5002/
        
        SSLCertificateFile /etc/letsencrypt/live/pos.twileloop.com/fullchain.pem
        SSLCertificateKeyFile /etc/letsencrypt/live/pos.twileloop.com/privkey.pem
        Include /etc/letsencrypt/options-ssl-apache.conf
     </VirtualHost>
     
     
     
      <VirtualHost *:443>
        ServerName auth.twileloop.com
        DocumentRoot /home/root/auth.twileloop
        
        <Directory /home/root/auth.twileloop>
            Options Indexes FollowSymLinks
            AllowOverride All
            Require all granted
        </Directory>
        
        ProxyPreserveHost On
        ProxyPass / https://localhost:5003/
        ProxyPassReverse / https://localhost:5003/ 
        
        SSLCertificateFile /etc/letsencrypt/live/auth.twileloop.com/fullchain.pem
        SSLCertificateKeyFile /etc/letsencrypt/live/auth.twileloop.com/privkey.pem
        Include /etc/letsencrypt/options-ssl-apache.conf
     </VirtualHost>
     
</IfModule>
